

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Initial Approaches &#8212; Reduction Guide</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'imaging-lines/imaging-lines-initial-approaches';</script>
    <link rel="shortcut icon" href="../_static/abaur.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Adopted Approach" href="imaging-lines-adopted-approach.html" />
    <link rel="prev" title="Dirty Image Cubes" href="imaging-lines-dirty-images.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/abaur.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/abaur.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../overview/overview-resources.html">Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/overview-breakdown.html">Breakdown of Our Task</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Step 0 - Getting set up</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../step0/step0-download-data.html">Download the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step0/step0-program-overview.html">Program Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step0/step0-restoring-pipeline-calibration.html">Restoring the Pipeline Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step0/step0-weblog.html">Inspecting the Weblog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step0/step0-dictionaries.html">Useful Dictionaries</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Step 1 - Prepare the continuum</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../step1/step1-manual-flags.html">Manual Flagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step1/step1-pseudo-continuum.html">Pseudocontinuum Measurement Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step1/step1-initial-continuum-images.html">Initial Continuum Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step1/step1-initial-self-calibration.html">Initial Self-Calibration</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Step 2 - Phase alignment</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../step2/step2-align-LBs.html">Align Long-Baseline Execution Blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step2/step2-align-SBs.html">Align Short-Baseline Execution Blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step2/step2-summary-of-shifts.html">Summary of Phase Shifts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Step 3 - Self-calibration of the continuum</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../step3/step3-selfcal-SBs.html">Self-Calibration of Short-Baseline Execution Blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step3/step3-selfcal-SBs%2BLBs.html">Self-Calibration of SB+LB data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step3/step3-continuum-ms-achieved.html">Create final continuum measurement set</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Step 4 - Prepare the lines</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../step4/step4-manual-flags.html">Manual Flagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step4/step4-split-spws.html">Splitting Out Line Spectral Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step4/step4-apply-phase-alignments.html">Apply Phase Shifts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step4/step4-apply-self-cal-solutions.html">Apply Self-Calibration Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step4/step4-continuum-subtraction.html">Continuum Subtraction</a></li>

<li class="toctree-l1"><a class="reference internal" href="../step4/step4-line-mses-achieved.html">Create final line measurement sets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Imaging - Continuum</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../imaging-cont/imaging-cont-procedure.html">Procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../imaging-cont/imaging-cont-preliminary-images.html">Preliminary Images</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Imaging - Lines</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="imaging-lines-procedure.html">Procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="imaging-lines-dirty-images.html">Dirty Image Cubes</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Initial Approaches</a></li>


<li class="toctree-l1"><a class="reference internal" href="imaging-lines-adopted-approach.html">Adopted Approach</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jjspeedie/guide.2021.1.00690.S" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jjspeedie/guide.2021.1.00690.S/issues/new?title=Issue%20on%20page%20%2Fimaging-lines/imaging-lines-initial-approaches.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/imaging-lines/imaging-lines-initial-approaches.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Initial Approaches</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Initial Approaches</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-and-masking">Cleaning and Masking</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#st-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters">1st approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results">Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask">2nd approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a broad mask</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask-now-over-a-wider-range-of-channels">3rd approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a broad mask, now over a wider range of channels</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#th-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-mask-made-from-a-model">4th approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a mask made from a model</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#making-a-mask-from-a-clean-model">Making a mask from a clean model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#imaging-with-auto-multithresh-kickstarted-with-the-mask-from-a-clean-model-unedited">Imaging with auto-multithresh kickstarted with the mask from a clean model (unedited)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pause">Pause</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#naasc-virtual-chat-with-ryan-loomis-summary">NAASC Virtual Chat with Ryan Loomis (summary)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"></a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="tip admonition">
<p class="admonition-title">Scripts for <strong>Imaging - Lines</strong>:</p>
<ul class="simple">
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/major_image_lines.py" target="_blank">major_image_lines.py</a> # main script (<a class="reference internal" href="imaging-lines-adopted-approach.html"><span class="doc std std-doc">adopted approach</span></a>)</p></li>
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/image_lines.py" target="_blank">image_lines.py</a> # earlier main script (<a class="reference internal" href="#"><span class="doc std std-doc">initial approaches</span></a>)</p></li>
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/dictionary_mask.py" target="_blank">dictionary_mask.py</a> # loads mask_dict</p></li>
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/dictionary_data.py" target="_blank">dictionary_data.py</a> # loads data_dict</p></li>
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/dictionary_disk.py" target="_blank">dictionary_disk.py</a> # loads disk_dict</p></li>
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/JvM_correction_casa6.py" target="_blank">JvM_correction_casa6.py</a> # MAPS JvM correction script (<a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2021ApJS..257....2C/abstract">Czekala et al. 2021</a>)</p></li>
<li><p><a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/keplerian_mask.py" target="_blank">keplerian_mask.py</a> # modified version of <a class="reference external" href="https://github.com/richteague/keplerian_mask">keplerian_mask</a> by <a class="reference external" href="https://richteague.github.io/">Rich Teague</a></p></li>
</ul>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
And data (obtained after <a class="reference internal" href="../step4/step4-line-mses-achieved.html"><span class="doc std std-doc">step 4</span></a>):</div>
<ul class="simple">
<li><p class="sd-card-text"><a href="https://www.canfar.net/storage/vault/list/jspeedie/2021.1.00690.S/private/measurement_sets" target="_blank">ABAur_12CO.bin30s.ms.contsub</a></p></li>
<li><p class="sd-card-text"><a href="https://www.canfar.net/storage/vault/list/jspeedie/2021.1.00690.S/private/measurement_sets" target="_blank">ABAur_13CO.bin30s.ms.contsub</a></p></li>
<li><p class="sd-card-text"><a href="https://www.canfar.net/storage/vault/list/jspeedie/2021.1.00690.S/private/measurement_sets" target="_blank">ABAur_C18O.bin30s.ms.contsub</a></p></li>
<li><p class="sd-card-text"><a href="https://www.canfar.net/storage/vault/list/jspeedie/2021.1.00690.S/private/measurement_sets" target="_blank">ABAur_SO.bin30s.ms.contsub</a></p></li>
</ul>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This page is more of a blog than a guide; more of a journal of experiments. Kept in case some niche aspects can be helpful. Recommend skip to next page: (<a class="reference internal" href="imaging-lines-adopted-approach.html"><span class="doc std std-doc">adopted approach</span></a>.</p>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="initial-approaches">
<h1>Initial Approaches<a class="headerlink" href="#initial-approaches" title="Permalink to this heading">#</a></h1>
<p>Relevant script: <a class="reference internal" href="#"><span class="doc std std-doc">initial approaches</span></a>.
<a href="https://github.com/jjspeedie/workflow.2021.1.0690.S/blob/main/image_lines.py" target="_blank">image_lines.py</a>.</p>
<section id="cleaning-and-masking">
<h2>Cleaning and Masking<a class="headerlink" href="#cleaning-and-masking" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">tclean</span></code> task gives the user the option to indicate where in the image to clean. The idea is that, inside the mask, the emission should be real (and therefore included in our model), and outside the mask, any emission should just be noise (and therefore excluded from the model).</p>
<p>For protoplanetary disks, we have some knowledge of how we expect their emission to look throughout the channels, because we expect the bulk of the disk to be Keplerian. <a class="reference external" href="https://richteague.github.io/">Rich Teague</a> therefore wrote his <a class="reference external" href="https://github.com/richteague/keplerian_mask">keplerian_mask</a> package, which is widely used for masking when making clean images of disks.</p>
<p><i>Can we use a keplerian mask for AB Aur?</i> That would be super convenient, but if we look at the <a class="reference internal" href="imaging-lines-dirty-images.html"><span class="doc std std-doc">dirty images</span></a> of <sup>12</sup>CO, <sup>13</sup>CO, and even C<sup>18</sup>O, the emission is clearly highly non-Keplerian. <strong>We therefore need to explore other options for masking.</strong></p>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="50%" controls>
  <source src="../_static/videos/ABAur_12CO.clean.keplerian_mask_m4.mov" type="video/mp4" alt="ABAur_12CO.clean.keplerian_mask_m4">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">'r_max':10.0</span></code> (arcsec), <code class="docutils literal notranslate"><span class="pre">'dV0':750.0</span></code> (large Doppler width of the line, in m/s), <code class="docutils literal notranslate"><span class="pre">'dVq':0.0</span></code> (Doppler width is not a function of radius), <code class="docutils literal notranslate"><span class="pre">'zr':0.0</span></code> (non-elevated emission), <code class="docutils literal notranslate"><span class="pre">'target_res':None</span></code> (scale the CLEAN beam for the convolution kernel).</p>
</div>
</div>
<p>Ryan foresaw this and gave a couple possible ideas:</p>
<ul class="simple">
<li><p>Use manually drawn masks. This involves spending (potentially a lot of) time upfront to define the masks by hand, but then you have them and can reuse them continuously. MAPS did this for their 12CO images (Rich Teague took the time to draw the masks for 12CO by hand, and then they used Keplerian masks for everything else). Here’s some central channels of Rich’s custom CO mask for GM Aur (from this I’m gathering it’s hard to draw smooth mask edges):</p></li>
</ul>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="50%" controls>
  <source src="../_static/videos/MAPS_CO_custom_mask_GMAur_CO_220GHz.bin_30s.dirty.mask.mp4" type="video/mp4" alt="MAPS_CO_custom_mask_GMAur_CO_220GHz.bin_30s.dirty.mask">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">MAPS_CO_custom_mask_GMAur_CO_220GHz.bin_30s.dirty.mask (<a class="reference external" href="https://alma-maps.info/data.html">MAPS</a>)</p>
</div>
</div>
<ul class="simple">
<li><p>Use a keplerian mask to define a “starting” mask, and then edit it by hand from there. In other words, save time by not drawing a mask from scratch.</p></li>
<li><p>Use auto-multithresh. This works well but is slow. Auto-multithresh is flexible; it draws an initial mask, and then updates it (grows it) during subsequent clean cycles. Here the time investment is re-spent every time you clean.</p></li>
<li><p>Take a dirty image, clean it a little bit, and define a mask by where the emission is over some threshold.</p></li>
<li><p>Bounce back and forth. There’s no good recipe that works for everything. Try a couple different things, see what works, and go with that.</p></li>
</ul>
<p>What do other people do / can we find examples or guidance in the literature for situations like our own? <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2021ApJS..257...19H/abstract">Huang et al. (2021, MAPS)</a> seem to have had a similar issue of non-Keplerian emission with their re-imaging of GM Aur in 12CO, and did something different to the MAPS imaging pipeline. Instead of Rich’s custom CO mask, they used “auto-multithresh” to automatically generate masks in tclean on the fly, using some input threshold parameters. The relevant sentences are:</p>
<blockquote>
<div><p>We applied the multiscale CLEAN algorithm (Cornwell 2008) with scales of [0, 0.4, 1”, 2”]. Since 12CO was also reobserved at higher spectral resolution than the other lines, we reimaged 12CO with channel widths of 0.1 km/s for better recovery of the kinematic details. Due to the irregular emission morphology, we used CASA’s auto-multithresh algorithm (Kepley et al. 2020) to draw the CLEAN mask. The auto-multithresh algorithm searches the cube for significant emission, beginning with a relatively conservative mask and then expanding to encompass more emission during subsequent major cycles. The mask was initialized with full coverage of the primary beam from 5.2–6.4 km/s, where the emission is the broadest, because auto-multithresh algorithm does not readily mask diffuse emission. After some experimentation, the following auto-multithresh parameters were selected: sidelobethreshold = 3.0, noisethreshold = 4.0, lownoisethreshold = 1.5, and minbeamfrac = 0.3. The CLEAN threshold was set to 5 mJy, corresponding to ~3× the rms of line-free channels in the dirty image.</p>
</div></blockquote>
</section>
<section id="st-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters">
<h2>1st approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters<a class="headerlink" href="#st-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters" title="Permalink to this heading">#</a></h2>
<p>The sidelobethreshold and noisethreshold parameters Huang et al. (2021) used are both lower (by 1.0) than the defaults in the “Table of Standard Salues: 12m (long) b75&gt;300m” (specified in the <a class="reference external" href="https://casaguides.nrao.edu/index.php/Automasking_Guide">Automasking Guide</a>). Effectively, lowering these two parameters makes auto-multithresh “more flexible” (it allows it to grow a little more into lower signal areas than the default values allow).</p>
<p>[Actually, the very first thing I tried was auto-multithresh with the default parameters in the Table of Standard Values. This is how I know the effect of lowering the sidelobethreshold and noisethreshold parameters.]</p>
<section id="results">
<h3>Results<a class="headerlink" href="#results" title="Permalink to this heading">#</a></h3>
<p>I found that even with lowered sidelobethreshold and noisethreshold parameters, auto-multithresh <strong>fails to capture extended/diffuse extended emission</strong> in 12CO and 13CO cubes. We can see this in the movies below. The problem is most clear to see in the rightmost movies, which shows the residuals (what’s left after tclean has finished). In all movies, the white contours are the “final” auto-multithresh mask (i.e., the mask used on the last cleaning cycle; all previous cycles’ masks would have been less extended, since the mask can only grow between cycles). There are strong residuals <em>outside the mask</em>. This means there is emission that is not being included in the model.</p>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="49%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_12CO.check.masking.mp4" type="video/mp4" alt="v1_robust1.5_12CO.check.masking">
</video>
<video width="47%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_12CO.check.masking.residual.mp4" type="video/mp4" alt="v1_robust1.5_12CO.check.masking.residual">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">12CO: After clean.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="49%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_13CO.check.masking.mp4" type="video/mp4" alt="v1_robust1.5_13CO.check.masking">
</video>
<video width="49%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_13CO.check.masking.residual.mp4" type="video/mp4" alt="v1_robust1.5_13CO.check.masking.residual">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">13CO: After clean.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="49%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_C18O.check.masking.mp4" type="video/mp4" alt="v1_robust1.5_C18O.check.masking">
</video>
<video width="49%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_C18O.check.masking.residual.mp4" type="video/mp4" alt="v1_robust1.5_C18O.check.masking.residual">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">C18O: After clean (The problem is not so bad for C18O.)</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="47%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_SO.check.masking.mp4" type="video/mp4" alt="v1_robust1.5_SO.check.masking">
</video>
<video width="49%" controls>
  <source src="../_static/videos/v1_robust1.5/v1_robust1.5_SO.check.masking.residual.mp4" type="video/mp4" alt="v1_robust1.5_SO.check.masking.residual">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">SO: After clean. (Hard to say with SO because we’re so close to the noise floor already - perhaps sidelobethreshold and noisethreshold parameters should be raised for SO.)</p>
</div>
</div>
<p><strong>This is problematic because:</strong></p>
<ul class="simple">
<li><p>If we use JvM-corrected images, the uncaptured emission will be downscaled (by the factor epsilon).</p></li>
<li><p>The cleaning will not actually reach the threshold, meaning the final images will be more shallowly cleaned than we specified. (It’s a self-closing loop: tclean/auto-multithresh uses the unmasked regions to estimate the noise left in the residuals, so if it’s estimating the noise using the regions with diffuse emission, it will think it’s reached the threshold sooner than it has, and therefore stop cleaning, and stop growing the mask.)</p></li>
</ul>
</section>
</section>
<section id="nd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask">
<h2>2nd approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a broad mask<a class="headerlink" href="#nd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask" title="Permalink to this heading">#</a></h2>
<p>Referring back to <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2021ApJS..257...19H/abstract">Huang et al. (2021, MAPS)</a>, we see they had a solution to the problem of auto-multithresh not masking diffuse emission:</p>
<blockquote>
<div><p>The mask was initialized with full coverage of the primary beam from 5.2–6.4 km/s, where the emission is the broadest, because auto-multithresh algorithm does not readily mask diffuse emission.</p>
</div></blockquote>
<p>I then discovered that getting auto-multithresh to actually use a pre-defined mask is non-trivial. The <a class="reference external" href="https://casaguides.nrao.edu/index.php/Automasking_Guide">Automasking Guide</a> provides some information at the bottom of the page, under the section titled <em>Advanced Use Case - Merging User Masks with Automasking</em>. So, this seems to be a bit niche, but at least it is a known issue.</p>
<p>Kickstarting auto-multithresh with a broad mask involves:</p>
<ol class="arabic simple">
<li><p>Make the (initial, broad) mask that you want auto-multithresh to start with. (For this I actually took Rich Teague’s keplerian mask code and modified it to give me a broad ellipse at all channels within a range I defined. In hindsight there are probably simpler ways to do this, but at the time I had no easier ideas.)</p></li>
<li><p>Do one initial round of cleaning with the (initial, broad) mask, and without auto-multithresh. For this round I set niter=cycleniter=1 (it’s important that niter=cycleniter, and both =1 simply so that the least amount of cleaning happens).</p></li>
<li><p>Restart tclean, now with auto-multithresh turned on, and give tclean instructions to pick up where the initial clean left off.</p></li>
</ol>
<p>For making the (initial, broad) mask, my first approach was to take the sentence “<em>The mask was initialized with full coverage of the primary beam from 5.2–6.4 km/s, where the emission is the broadest</em>” to heart, and initialize the broad mask only in the channels where emission is broadest (and have no mask, for this initial round of tclean, in the other channels, trusting that auto-multithresh will make its own). I chose the channel ranges based on where auto-multithresh had started failing to capture the emission in <strong>1st approach</strong>.</p>
<section id="id1">
<h3>Results<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>This seems to have worked well. Auto-multithresh did pick up the broad initial mask and take it from there. It won’t shrink its mask in subsequent iterations, so we’re stuck with the broad mask. But, this approach does seem to capture the diffuse emission in the clean image yield relatively even residuals inside the mask.</p>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="49%" controls>
  <source src="../_static/videos/v2_robust1.5_old/v2_robust1.5_13CO.check.masking.after.entire.clean.mp4" type="video/mp4" alt="v2_robust1.5_13CO.check.masking.after.entire.clean">
</video>
<video width="49%" controls>
  <source src="../_static/videos/v2_robust1.5_old/v2_robust1.5_13CO.check.masking.after.entire.clean.residual.mp4" type="video/mp4" alt="v2_robust1.5_13CO.check.masking.after.entire.clean.residual">
</video>
<video width="49%" controls>
  <source src="../_static/videos/v2_robust1.5_old/v2_robust1.5_13CO.check.masking.after.entire.clean.model.mp4" type="video/mp4" alt="v2_robust1.5_13CO.check.masking.after.entire.clean.model">
</video>
</center>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">13CO: After (restarted) clean</p>
</div>
</div>
<p><strong>Room for improvement:</strong> The broad initial mask should encompass an even larger range of channels. In the residuals movie (middle), there are still some residuals outside the auto-multithresh mask (e.g. 4.8 km/s, 6.942 km/s). If we look at the model (rightmost movie), we can see the multi-scale deconvolver putting many small-Gaussians right up against the edge of the mask, trying to encompass the emission that extends over the sides. This suggests we just need to increase the channel range of the broad initial mask, to include bluer and redder channels.</p>
</section>
</section>
<section id="rd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask-now-over-a-wider-range-of-channels">
<h2>3rd approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a broad mask, now over a wider range of channels<a class="headerlink" href="#rd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask-now-over-a-wider-range-of-channels" title="Permalink to this heading">#</a></h2>
<p>Here I did the same thing as <strong>2nd approach</strong>, but initializing the broad mask to begin and end at bluer and redder channels.</p>
<section id="id2">
<h3>Results<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<p>This seems to have not worked as well. The 3 problems I see are:</p>
<ul class="simple">
<li><p>The residuals within the mask after cleaning are not of the same magnitude as the “noise” outside the mask. There are significant residuals inside the mask that are spatially uneven. [This can be seen in the residual movies below.]</p></li>
<li><p>The cleaning is uneven in velocity space. Some channels have extremely large residuals in a discontinuous way from other channels. [A good example of this is at 4.002 km/s in 12CO.]</p></li>
<li><p>The tails of 12/13CO emission at the bluest and reddest channels in the clean image stop abruptly, as if they have not been cleaned. [This can be seen in position-velocity maps below as a truncation of the tails in JvM-corrected images. The downscaled-by-epsilon residuals helps to make the problem really visually obvious.]</p></li>
</ul>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="49%" controls>
  <source src="../_static/videos/v2_robust1.5/v2_robust1.5_13CO.clean.image.imview_channels.mp4" type="video/mp4" alt="v2_robust1.5_13CO.clean.image.imview_channels">
</video>
<video width="49%" controls>
  <source src="../_static/videos/v2_robust1.5/v2_robust1.5_13CO.clean.residual.imview_channels.mp4" type="video/mp4" alt="v2_robust1.5_13CO.clean.residual.imview_channels">
</video>
<a class="mb-1 reference internal image-reference" href="../_images/ABAur_13CO.clean.JvMcorr.image_test000.png"><img alt="ABAur_13CO.clean.JvMcorr.image" class="mb-1" src="../_images/ABAur_13CO.clean.JvMcorr.image_test000.png" style="width: 98%;" /></a>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">13CO</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<center>
<video width="51%" controls>
  <source src="../_static/videos/v2_robust1.5/v2_robust1.5_12CO.clean.image.imview_channels.mp4" type="video/mp4" alt="v2_robust1.5_12CO.clean.image.imview_channels">
</video>
<video width="47%" controls>
  <source src="../_static/videos/v2_robust1.5/v2_robust1.5_12CO.clean.residual.imview_channels.mp4" type="video/mp4" alt="v2_robust1.5_12CO.clean.residual.imview_channels">
</video>
<a class="mb-1 reference internal image-reference" href="../_images/ABAur_12CO.clean.JvMcorr.image_test000.png"><img alt="ABAur_12CO.clean.JvMcorr.image" class="mb-1" src="../_images/ABAur_12CO.clean.JvMcorr.image_test000.png" style="width: 98%;" /></a>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">13CO</p>
</div>
</div>
<p>Line profiles of the JvM corrected images (another way to see the discontinuous cleaning in the tail channels):</p>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<a class="mb-1 reference internal image-reference" href="../_images/v2_robust1.5+0.5_12CO.clean.JvMcorr.image.line_profile.png"><img alt="v2_robust1.5+0.5_12CO.clean.JvMcorr.image.line_profile" class="mb-1" src="../_images/v2_robust1.5+0.5_12CO.clean.JvMcorr.image.line_profile.png" style="width: 48%;" /></a>
<a class="mb-1 reference internal image-reference" href="../_images/v2_robust1.5+0.5_13CO.clean.JvMcorr.image.line_profile.png"><img alt="v2_robust1.5+0.5_13CO.clean.JvMcorr.image.line_profile" class="mb-1" src="../_images/v2_robust1.5+0.5_13CO.clean.JvMcorr.image.line_profile.png" style="width: 48%;" /></a>
</div>
<div class="sd-card-footer docutils">
<p class="sd-card-text">caption</p>
</div>
</div>
<p><strong>Ideas for improvement:</strong> Perhaps one solution is to clean deeper (i.e., lower the threshold at which tclean stops). I have been setting the cleaning threshold to 3x the rms noise measured in line-free channels in the dirty image, and I would not like to deviate from that (3x or 4x the rms is best/common practice).</p>
<p>There are some reasons making me consider abandoning the broad initial mask idea entirely:</p>
<ol class="arabic simple">
<li><p>I’m generally nervous about using a broad mask (especially one that doesn’t shrink). If this was a good idea, then no one would bother with developing keplerian masks or the auto-multithresh algorithm. I’m concerned that a broad mask allows artifacts/non-real emission to be cleaned (i.e. to be included in the model). Or, at best, it lets the larger Gaussians bleed into areas of the image that should be blank sky (in other words, the absence/decrease of emission between spiral arms is not respected).</p></li>
<li><p>Compared to <strong>1st approach</strong> (where auto-multithresh was not initialized with a broad mask), I found that in the <strong>2nd approach</strong> and <strong>3rd approach</strong>, the number of clean major cycles (which I track by asking auto-multithresh to save its intermediate masks) was lower. I’m not entirely sure why, or fully what it means, but I do know it means auto-multithresh has no opportunity to adjust itself.</p></li>
</ol>
<p>Thinking back to one of Ryan’s ideas: “<em>Take a dirty image, clean it a little bit, and define a mask by where the emission is over some threshold.</em>” This seems like a good way that we could develop more precise masks.</p>
</section>
</section>
<section id="th-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-mask-made-from-a-model">
<h2>4th approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a mask made from a model<a class="headerlink" href="#th-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-mask-made-from-a-model" title="Permalink to this heading">#</a></h2>
<section id="making-a-mask-from-a-clean-model">
<h3>Making a mask from a clean model<a class="headerlink" href="#making-a-mask-from-a-clean-model" title="Permalink to this heading">#</a></h3>
<p>After plotting contours of some of the above cleaned images and imagining how well these contours would serve as an initial mask (read: how the jagged edges might invite tiny Gaussians), I found myself thinking about how I could get a smoother mask. This is how I got the idea of using a clean model to define a threshold mask.</p>
<p>The order of operations now becomes:</p>
<ol class="arabic simple">
<li><p>Make a model. Do this by cleaning down to a threshold of 10x the rms measured in the dirty image in line-free channels (so, not deeply cleaned, to minimize the chances of capturing unreal emission). For this clean, use a primary beam mask (usemask=’pb’ and pbmask=0.2) in all channels, and no auto-multithresh. Also, remove the smallest multiscale Gaussian so that the model is composed of [0.1, 0.3, 0.6, 1., 2. arcsec] Gaussians.</p></li>
<li><p>Translate this model into a mask, using a threshold you determine by experimentation. Currently I’m using 10x the mean. For reference, model units are in Jy/pixel.</p></li>
<li><p>From here, it’s the same as before. Do one initial round of cleaning with the (model) mask, and without auto-multithresh. For this round set niter=cycleniter=1 (it’s important that niter=cycleniter, and both =1 simply so that the least amount of cleaning happens).</p></li>
<li><p>Restart tclean, now with auto-multithresh turned on, and give tclean instructions to pick up where the initial clean left off.</p></li>
</ol>
<p>Translating a model image into a mask was somewhat non-trivial for me (I didn’t find the <a href="https://casadocs.readthedocs.io/en/stable/api/tt/casatasks.imaging.makemask.html?highlight=makemask" target="_blank">makemask</a> and <a href="https://casadocs.readthedocs.io/en/stable/api/tt/casatools.image.html?highlight=calcmask#casatools.image.image.calcmask" target="_blank">ia.calcmask</a> tasks straightforward to use, though examples of them being used in Rich Teague’s keplerian mask really helped). Here’s an example of how the model mask looks for 13CO, 12CO and C18O (white contours), if the threshold is 10x the mean of the model pixel values, overlaid on top of the model itself. For reference, the rightmost movie shows either the residuals (13CO) or the image (12CO and C18O) from the clean that made the model.</p>
</section>
<section id="imaging-with-auto-multithresh-kickstarted-with-the-mask-from-a-clean-model-unedited">
<h3>Imaging with auto-multithresh kickstarted with the mask from a clean model (unedited)<a class="headerlink" href="#imaging-with-auto-multithresh-kickstarted-with-the-mask-from-a-clean-model-unedited" title="Permalink to this heading">#</a></h3>
</section>
</section>
<section id="pause">
<h2>Pause<a class="headerlink" href="#pause" title="Permalink to this heading">#</a></h2>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="naasc-virtual-chat-with-ryan-loomis-summary">
<h1>NAASC Virtual Chat with Ryan Loomis (summary)<a class="headerlink" href="#naasc-virtual-chat-with-ryan-loomis-summary" title="Permalink to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id3">
<h1><a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h1>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./imaging-lines"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="imaging-lines-dirty-images.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Dirty Image Cubes</p>
      </div>
    </a>
    <a class="right-next"
       href="imaging-lines-adopted-approach.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Adopted Approach</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Initial Approaches</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-and-masking">Cleaning and Masking</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#st-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters">1st approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results">Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask">2nd approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a broad mask</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rd-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-broad-mask-now-over-a-wider-range-of-channels">3rd approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a broad mask, now over a wider range of channels</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#th-approach-masking-emission-with-auto-multithresh-and-the-huang-et-al-2021-parameters-but-kickstarting-auto-multithresh-with-a-mask-made-from-a-model">4th approach: Masking emission with auto-multithresh and the Huang et al. (2021) parameters, but kickstarting auto-multithresh with a mask made from a model</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#making-a-mask-from-a-clean-model">Making a mask from a clean model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#imaging-with-auto-multithresh-kickstarted-with-the-mask-from-a-clean-model-unedited">Imaging with auto-multithresh kickstarted with the mask from a clean model (unedited)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pause">Pause</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#naasc-virtual-chat-with-ryan-loomis-summary">NAASC Virtual Chat with Ryan Loomis (summary)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"></a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jess Speedie
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>